(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["addSong"],{"1b15":function(e,t,s){"use strict";var a=s("3bbc"),n=s.n(a);n.a},"3bbc":function(e,t,s){},"5b3b":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"add-song"},[s("div",{staticClass:"search-tab"},[s("div",{staticClass:"left",on:{click:e.back}},[s("span",{staticClass:"fa-arrow-left back"})]),s("div",{staticClass:"search-input-box"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchContent,expression:"searchContent"}],staticClass:"search-input",attrs:{type:"text"},domProps:{value:e.searchContent},on:{focus:function(t){e.isActive=!0},blur:function(t){e.isActive=!1},input:function(t){t.target.composing||(e.searchContent=t.target.value)}}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.Flag,expression:"Flag"}],staticClass:"fa-close clear-input",on:{click:e.clearInput}}),s("ul",{directives:[{name:"show",rawName:"v-show",value:e.Flag&&e.isActive,expression:"Flag && isActive"}],staticClass:"search-list"},[s("li",{staticClass:"list-items",on:{click:function(t){return e.getSearchResult(e.searchContent)}}},[e._v("搜索“"+e._s(e.searchContent)+"”")]),e._l(e.allMatch,(function(t){return s("li",{key:t.keyword,staticClass:"list-items",on:{click:function(s){return e.getSearchResult(t.keyword)}}},[s("span",{staticClass:"fa-search"}),e._v(" "+e._s(t.keyword)+" ")])}))],2)]),s("div",{staticClass:"slot"})]),0===e.searchRes.length?s("div",{staticClass:"recently-played"},[s("h6",{staticClass:"title"},[e._v("最近播放")]),s("ul",{staticClass:"list"},e._l(e.playHistoryList,(function(t){return s("li",{key:t.id,staticClass:"list-items",on:{click:function(s){return e.add(t.id)}}},[e._v(e._s(t.name))])})),0)]):s("search-res-scroll",{ref:"searchResScroll",staticClass:"scroll-wrapper",style:e.bottomSty,attrs:{pullUpLoad:!0},on:{pullingUp:e.nextSearchRes}},[s("div",{staticClass:"search-result"},[s("ul",{staticClass:"result-list"},e._l(e.searchRes,(function(t,a){return s("li",{key:a,staticClass:"items",on:{click:function(s){return e.add(t.id)}}},[s("p",{staticClass:"name"},[e._v(e._s(t.name))]),s("p",{staticClass:"desc"},[e._v(e._s(t.desc))])])})),0)])])],1)},n=[],r=(s("a4d3"),s("e01a"),s("d28b"),s("b0c0"),s("d3b7"),s("e25e"),s("3ca3"),s("498a"),s("ddb0"),s("96cf"),s("bee2")),c=s("99de"),i=s("7e84"),l=s("262e"),o=s("d4ec"),u=s("9ab4"),h=s("7275"),d=s("faaf"),p=s("9fb0"),f=s("60a3"),v=function e(t){Object(o["a"])(this,e),this.id=t.id,this.name=t.name,this.desc=t.album.name},b=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(c["a"])(this,Object(i["a"])(t).apply(this,arguments)),e.searchContent="",e.searchRes=[],e.allMatch=[],e.isActive=!0,e.timer=null,e.page=0,e}return Object(l["a"])(t,e),Object(r["a"])(t,[{key:"clearInput",value:function(){this.searchContent=""}},{key:"back",value:function(){this.$router.back()}},{key:"nextSearchRes",value:function(){var e=this,t=window.setTimeout((function(){e.page++,e.getSearchResult(e.searchContent),e.$refs.searchResScroll.finishPullUp(),window.clearTimeout(t)}),1e3)}},{key:"getSearchResult",value:function(e){var t,s,a,n,r,c,i,l;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return this.searchContent=e,o.next=3,regeneratorRuntime.awrap(Object(h["b"])(e,1,30,this.page));case 3:if(t=o.sent,200!==t.code){o.next=27;break}if(t.result.songs){o.next=7;break}return o.abrupt("return",!1);case 7:for(s=!0,a=!1,n=void 0,o.prev=10,r=t.result.songs[Symbol.iterator]();!(s=(c=r.next()).done);s=!0)l=c.value,(i=this.searchRes).push.apply(i,[new v(l)]);o.next=18;break;case 14:o.prev=14,o.t0=o["catch"](10),a=!0,n=o.t0;case 18:o.prev=18,o.prev=19,s||null==r.return||r.return();case 21:if(o.prev=21,!a){o.next=24;break}throw n;case 24:return o.finish(21);case 25:return o.finish(18);case 26:this.$refs.searchResScroll&&this.$refs.searchResScroll.refresh();case 27:case"end":return o.stop()}}),null,this,[[10,14,18,26],[19,,21,25]])}},{key:"getSearchSuggest",value:function(e){var t;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,regeneratorRuntime.awrap(Object(h["c"])(e));case 2:t=s.sent,200===t.code&&(this.allMatch=t.result.allMatch);case 4:case"end":return s.stop()}}),null,this)}},{key:"add",value:function(e){var t;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,regeneratorRuntime.awrap(Object(d["f"])("add",parseInt(this.$route.query.id),e));case 2:t=s.sent,200===t.code?this.$toast("歌单添加歌曲成功"):this.$toast(t.message);case 4:case"end":return s.stop()}}),null,this)}},{key:"debounce",value:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;this.timer&&clearTimeout(this.timer),this.timer=window.setTimeout((function(){e.call(t,t.searchContent)}),s)}},{key:"changeSearchContent",value:function(e){0!==e.trim().length&&this.debounce(this.getSearchSuggest)}},{key:"Flag",get:function(){return!(""===this.searchContent)}},{key:"playHistoryList",get:function(){return this.$store.state.playHistory}},{key:"bottomSty",get:function(){return 0!==this.searchRes.length&&0!==this.$store.state.playList.length?{bottom:"50px"}:{bottom:"0px"}}}]),t}(f["c"]);u["a"]([Object(f["d"])("searchContent")],b.prototype,"changeSearchContent",null),b=u["a"]([Object(f["a"])({components:{searchResScroll:p["a"]}})],b);var g=b,m=g,y=(s("1b15"),s("2877")),w=Object(y["a"])(m,a,n,!1,null,"42bed690",null);t["default"]=w.exports},7275:function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"c",(function(){return r})),s.d(t,"b",(function(){return c}));var a=s("72e7");function n(){return Object(a["a"])({url:"/search/hot/detail"})}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mobile";return Object(a["a"])({url:"/search/suggest",params:{keywords:e,type:t}})}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Object(a["a"])({url:"/search",params:{keywords:e,limit:s,offset:n*s,type:t}})}}}]);